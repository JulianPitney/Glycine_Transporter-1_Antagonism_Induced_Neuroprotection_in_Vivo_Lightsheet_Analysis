# Step 6: Process Aivia Results

This step is where the data generated by Aivia is filtered, binned, and graphed. In addition, vessel density is calculated from lower-level metrics.

# Table of Contents
* [Purpose](#purpose)
* [Usage](#usage)
* [Troubleshooting](#troulbeshooting)
* [Contact](#contact)

# Purpose
This step is done for multiple reasons. The binning is done to select the vessels we're most interested in for examining a particular question. (E.G vessels are often placed into bins by vessel diameter, as looking at large vessels in isolation or small vessels in isolation can be useful for various reasons). This step is also where vessel density is derived from lower-level features given by Aivia. Finally, this script organizes the data into Excel sheets that have a more convenient format for us to work with.


# Usage

**Software Requirements:**

| Name | Version |
| ----------- | ----------- |
| Windows | 10 |
| Python | 3.6.7 |
| Pandas | 1.2.4 |
| Numpy | 1.20.2 |
| Matplotlib | 3.4.1 |

**Inputs:** The excel sheets generated by Aivia in `Step5_AiviaAnalysis`.

**Outputs:** Excel sheets containing the sorted, binned and reformatted data from the input Excel sheets.  

**Steps:**
1. Open the `process_aivia_results.py` script in your text editor of choice. On lines 12-15, modify the `M1`, `M2`, `M3` and `M4` variables to open the relevant Excel file for the four mice you want to compare.

2. Next, on lines 122-125, modify the `to_excel` function calls to save the output Excel files containing binned vessel diameter counts to your directory of choice.

3. Next, on line 213, modify the `np.savetxt` function to save the calculated vessel density values to a text file in your location of choice.

4. Finally, on lines 282-285, modify the `to_excel` function calls to save the binned vessel length counts to an Excel file in your location of choice.

# Troubleshooting
No common problems reported yet.

# Contact
* [Boyang Wang](jwang149@gmail.com)
